{
  "$schema": "https://www.krakend.io/schema/v3.json",
  "version": 3,
  "name": "api-gateway",
  "port": 8080,
  "timeout": "3000ms",
  "endpoints": [
    {
      "endpoint": "/api/auth/login",
      "method": "POST",
      "backend": [
        {
          "url_pattern": "/api/auth/login",
          "host": ["http://auth_service:5000"]
        }
      ]
    },

    { "endpoint": "/api/auth/register", "method": "POST", "backend": [ { "url_pattern": "/api/auth/register", "host": ["http://auth_service:5000"] } ] },
    { "endpoint": "/api/auth/me", "method": "GET", "extra_config": { "github.com/devopsfaith/krakend/http": { "headers_to_pass": ["Authorization"] } }, "backend": [ { "url_pattern": "/api/auth/me", "host": ["http://auth_service:5000"] } ] },

    { "endpoint": "/api/products", "method": "GET", "extra_config": { "github.com/devopsfaith/krakend/http": { "headers_to_pass": ["Authorization"] } }, "backend": [ { "url_pattern": "/api/products", "host": ["http://product_service:5000"] } ] },
    { "endpoint": "/api/products", "method": "POST", "extra_config": { "github.com/devopsfaith/krakend/http": { "headers_to_pass": ["Authorization"] } }, "backend": [ { "url_pattern": "/api/products", "host": ["http://product_service:5000"] } ] },
    { "endpoint": "/api/products/search", "method": "GET", "extra_config": { "github.com/devopsfaith/krakend/http": { "headers_to_pass": ["Authorization"] } }, "backend": [ { "url_pattern": "/api/products/search", "host": ["http://product_service:5000"] } ] },
    { "endpoint": "/api/products/{product_id}", "method": "PUT", "extra_config": { "github.com/devopsfaith/krakend/http": { "headers_to_pass": ["Authorization"] } }, "backend": [ { "url_pattern": "/api/products/{product_id}", "host": ["http://product_service:5000"] } ] },
    { "endpoint": "/api/products/get/{product_id}", "method": "GET", "backend": [ { "url_pattern": "/api/products/get/{product_id}", "host": ["http://product_service:5000"] } ] },

    { "endpoint": "/api/locations", "method": "GET", "extra_config": { "github.com/devopsfaith/krakend/http": { "headers_to_pass": ["Authorization"] } }, "backend": [ { "url_pattern": "/api/locations", "host": ["http://location_service:5000"] } ] },
    { "endpoint": "/api/locations/id/{location_id}", "method": "GET", "extra_config": { "github.com/devopsfaith/krakend/http": { "headers_to_pass": ["Authorization"] } }, "backend": [ { "url_pattern": "/api/locations/id/{location_id}", "host": ["http://location_service:5000"] } ] },
    { "endpoint": "/api/locations/select", "method": "GET", "backend": [ { "url_pattern": "/api/locations/select", "host": ["http://location_service:5000"] } ] },
    { "endpoint": "/api/locations/{name}", "method": "GET", "backend": [ { "url_pattern": "/api/locations/{name}", "host": ["http://location_service:5000"] } ] },

    { "endpoint": "/api/sale", "method": "GET", "extra_config": { "github.com/devopsfaith/krakend/http": { "headers_to_pass": ["Authorization"] } }, "backend": [ { "url_pattern": "/api/sale", "host": ["http://sale_service:5000"] } ] },
    { "endpoint": "/api/sale", "method": "POST", "extra_config": { "github.com/devopsfaith/krakend/http": { "headers_to_pass": ["Authorization"] } }, "backend": [ { "url_pattern": "/api/sale", "host": ["http://sale_service:5000"] } ] },
    { "endpoint": "/api/sale/{sale_id}", "method": "DELETE", "extra_config": { "github.com/devopsfaith/krakend/http": { "headers_to_pass": ["Authorization"] } }, "backend": [ { "url_pattern": "/api/sale/{sale_id}", "host": ["http://sale_service:5000"] } ] },

    { "endpoint": "/api/cart", "method": "GET", "extra_config": { "github.com/devopsfaith/krakend/http": { "headers_to_pass": ["Authorization"] } }, "backend": [ { "url_pattern": "/api/cart", "host": ["http://cart_service:5000"] } ] },
    { "endpoint": "/api/cart", "method": "POST", "extra_config": { "github.com/devopsfaith/krakend/http": { "headers_to_pass": ["Authorization"] } }, "backend": [ { "url_pattern": "/api/cart", "host": ["http://cart_service:5000"] } ] },
    { "endpoint": "/api/cart/checkout", "method": "POST", "extra_config": { "github.com/devopsfaith/krakend/http": { "headers_to_pass": ["Authorization"] } }, "backend": [ { "url_pattern": "/api/cart/checkout", "host": ["http://cart_service:5000"] } ] },

    { "endpoint": "/api/stocks", "method": "GET", "extra_config": { "github.com/devopsfaith/krakend/http": { "headers_to_pass": ["Authorization"] } }, "backend": [ { "url_pattern": "/api/stocks", "host": ["http://stock_service:5000"] } ] },
    { "endpoint": "/api/stocks", "method": "POST", "extra_config": { "github.com/devopsfaith/krakend/http": { "headers_to_pass": ["Authorization"] } }, "backend": [ { "url_pattern": "/api/stocks", "host": ["http://stock_service:5000"] } ] },
    { "endpoint": "/api/stocks/requests", "method": "GET", "extra_config": { "github.com/devopsfaith/krakend/http": { "headers_to_pass": ["Authorization"] } }, "backend": [ { "url_pattern": "/api/stocks/requests", "host": ["http://stock_service:5000"] } ] },
    { "endpoint": "/api/stocks/requests", "method": "POST", "extra_config": { "github.com/devopsfaith/krakend/http": { "headers_to_pass": ["Authorization"] } }, "backend": [ { "url_pattern": "/api/stocks/requests", "host": ["http://stock_service:5000"] } ] },
    { "endpoint": "/api/stocks/requests/{request_id}/fulfill", "method": "POST", "extra_config": { "github.com/devopsfaith/krakend/http": { "headers_to_pass": ["Authorization"] } }, "backend": [ { "url_pattern": "/api/stocks/requests/{request_id}/fulfill", "host": ["http://stock_service:5000"] } ] },
    { "endpoint": "/api/stocks/check", "method": "GET", "backend": [ { "url_pattern": "/api/stocks/check", "host": ["http://stock_service:5000"] } ] },
    { "endpoint": "/api/stocks/deduct", "method": "POST", "backend": [ { "url_pattern": "/api/stocks/deduct", "host": ["http://stock_service:5000"] } ] }
  ]
}
